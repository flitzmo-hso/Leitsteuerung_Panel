{"ast":null,"code":"var _jsxFileName = \"/home/flitzmofinal/GitHub/Leitsteuerung_Panel/src/components/Orders/ManualOrder.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Button from '@material-ui/core/Button';\nimport axios from \"axios\"; //import Paper from '@material-ui/core/Paper';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ManualOrder() {\n  _s();\n\n  //const [DeliveryVisibility, setDeliveryVisibility] = useState(\"inline\");\n  //const [LoopVisibility, setLoopVisibility] = useState(\"none\");\n\n  /*{\"task_type\": \"Delivery\", \"start_time\": 0, \"priority\": 0, \n  \"description\": { \"dropoff_ingestor\": \"coke_ingestor\", \"dropoff_place_name\": \"hardware_2\",\"pickup_dispenser\": \n  \"coke_dispenser\", \"pickup_place_name\": \"pantry\" } }) */\n  const [orderId, setOrderId] = useState(\"\");\n  const [sessionId, setSessionId] = useState(\"\");\n\n  function getFormValues() {\n    //Delivery\n    var startzeit = document.getElementById('startzeit').value;\n    var prio = document.getElementById('prio').value;\n    var coordinatefrom = document.getElementById('coordinatefrom').value;\n    var coordinateto = document.getElementById('coordinateto').value;\n    var pickupdispenser = document.getElementById('pickupdispenser').value;\n    var dropoffingestor = document.getElementById('dropoffingestor').value; //Loop\n    //var auftragstyp = document.getElementById('auftragstyp').value; \n    //var startLoc = document.getElementById('startLoc').value; //Loop\n    //var endLoc = document.getElementById('endLoc').value; //Loop\n    //var numberLoops = document.getElementById('numberLoops').value; //Loop\n    //Delivery-Order\n\n    if (startzeit === '' || prio === '' || coordinatefrom === '' || coordinateto === '' || pickupdispenser === '' || dropoffingestor === '') {\n      return undefined;\n    }\n    /*\n        var obj = {}\n    obj['task_type'] = \"Delivery\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio); \n    obj[\"description\"] = {\"dropoff_ingestor\": dropoffingestor, \"dropoff_place_name\": coordinateto, \"pickup_dispenser\": \n    pickupdispenser, \"pickup_place_name\": coordinatefrom }; */\n\n\n    var obj = {\n      \"task_type\": \"Delivery\",\n      \"start_time\": parseInt(startzeit),\n      \"priority\": parseInt(prio),\n      \"description\": {\n        \"dropoff_ingestor\": dropoffingestor,\n        \"dropoff_place_name\": coordinateto,\n        \"pickup_dispenser\": pickupdispenser,\n        \"pickup_place_name\": coordinatefrom\n      }\n    }; //Loop Order\n\n    /*if (auftragstyp === \"Loop\") {\n       if(startzeit === '' || prio === '' || numberLoops === '' || \n         numberLoops === 0 || startLoc === '' || endLoc === '')  { return undefined;} \n         obj['task_type'] = \"Loop\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio);\n      obj['description'] = {\"num_loops\": parseInt(numberLoops) , \"start_name\": startLoc, \"finish_name\": endLoc};\n        } */\n\n    return obj;\n  }\n\n  function sendToAgv() {\n    var obj = getFormValues();\n\n    if (obj === undefined || obj.length === 0) {\n      alert(\"Bitte richtige Daten eingeben.\");\n      return;\n    }\n\n    console.log(\"Auftrag:\", obj); //axios.post('http://0.0.0.0:8080/submit_task',{\"task_type\":\"Loop\", \"start_time\":0, \"description\": {\"start_name\": \"coe\", \"finish_name\": \"pantry\", \"num_loops\":1}})\n    //axios.post('http://0.0.0.0:8080/submit_task',{\"task_type\": \"Delivery\", \"start_time\": 0, \"priority\": 0, \"description\": { \"dropoff_ingestor\": \"coke_ingestor\", \"dropoff_place_name\": \"hardware_2\",\"pickup_dispenser\": \"coke_dispenser\", \"pickup_place_name\": \"pantry\" } })\n\n    axios.post('http://0.0.0.0:8080/submit_task', obj).then(res => {\n      if (res.data === undefined || res.data.length === 0) return;\n      console.log(\"Returned Task ID:\", res.data['task_id']);\n      var taskId = res.data['task_id']; //Put orders to DB\n\n      PutOrderToDb(obj);\n      getOrderId();\n      getSessionId();\n      sleep(1000).then(() => {\n        console.log(\"TaskId:\", taskId, \"OrderId\", orderId, \"SessionId:\", sessionId);\n        insertMapping(taskId); //ASK_ID in MYSQL ORDER.OrderMappingRMF\n      });\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      alert(\"Fehler beim Auftrag übermitteln.\");\n    });\n    return;\n  }\n\n  function insertMapping(taskid) {\n    obj = {\n      \"M_SESSIONID\": sessionId,\n      \"OM_DELIVERYID\": taskid,\n      \"OM_O_ID\": orderId,\n      \"OM_OT_ID\": 2\n    };\n    axios.post('http://0.0.0.0:8080/insertMapping', obj).then(res => {\n      console.log(\"Done\");\n      alert(\"Erfolgreich übermittelt.\");\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      alert(\"Fehler.\");\n    });\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  function getSessionId() {\n    axios.get('http://0.0.0.0:8080/getSessionId').then(res => {\n      console.log(\"SessionId:\", res[\"data\"]);\n      setSessionId(String(res[\"data\"]));\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      alert(\"Fehler bei der SessionId.\");\n    });\n  }\n\n  function getOrderId() {\n    axios.get('http://0.0.0.0:8080/getOrderId?ordertype=2').then(res => {\n      console.log(\"Orderid:\", res[\"data\"]);\n      setOrderId(String(res[\"data\"]));\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      alert(\"Fehler bei der OrderId.\");\n    });\n  }\n\n  function PutOrderToDb(objVal) {\n    axios.post('http://0.0.0.0:8080/postOrderManual', objVal).then(res => {\n      console.log(\"DB RESPONSE:\", res);\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      alert(\"Fehler.\");\n    });\n    return;\n  } //Visibility of input fields for specific order typ\n\n  /*function dropDownChange(newValue){\n     if(newValue === undefined || newValue === null) return;\n     //Loop\n    if (newValue === \"Loop\") {\n      setDeliveryVisibility(\"none\");\n      setLoopVisibility(\"inline\");\n    }\n    \n    //Delivery\n    if (newValue === \"Delivery\") {\n      setDeliveryVisibility(\"inline\");\n      setLoopVisibility(\"none\");\n    }\n  } */\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    align: \"left\",\n    justify: \"left\",\n    alignItems: \"left\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Manueller Fahrauftrag\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 2\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colspan: \"1\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            value: \"0\",\n            type: \"number\",\n            id: \"startzeit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 26\n          }, this), \" Startzeit (Minuten von jetztab)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colspan: \"1\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            value: \"0\",\n            type: \"number\",\n            id: \"prio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 26\n          }, this), \" Priorit\\xE4t \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colspan: \"1\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            value: \"pantry\",\n            type: \"text\",\n            id: \"coordinatefrom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 26\n          }, this), \" Koordinate von\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colspan: \"1\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            value: \"hardware_2\",\n            type: \"text\",\n            id: \"coordinateto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 26\n          }, this), \" Koordinate zu\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colspan: \"1\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            value: \"coke_dispenser\",\n            type: \"text\",\n            id: \"pickupdispenser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 26\n          }, this), \" Abholpunkt\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colspan: \"1\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            value: \"coke_ingestor\",\n            type: \"text\",\n            id: \"dropoffingestor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 26\n          }, this), \" Abwurfpunkt\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button //variant=\"contained\" \n        , {\n          style: {\n            backgroundColor: \"gray\"\n          },\n          onClick: sendToAgv,\n          title: \"Mit Klick auf diesen Button werden manuelle Fahrauftr\\xE4ge weitergegeben.\",\n          children: \"Absenden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 2\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ManualOrder, \"E0rYjC7T8gu7hkUyUCtyL9gjur8=\");\n\n_c = ManualOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManualOrder\");","map":{"version":3,"sources":["/home/flitzmofinal/GitHub/Leitsteuerung_Panel/src/components/Orders/ManualOrder.js"],"names":["React","useState","Button","axios","ManualOrder","orderId","setOrderId","sessionId","setSessionId","getFormValues","startzeit","document","getElementById","value","prio","coordinatefrom","coordinateto","pickupdispenser","dropoffingestor","undefined","obj","parseInt","sendToAgv","length","alert","console","log","post","then","res","data","taskId","PutOrderToDb","getOrderId","getSessionId","sleep","insertMapping","catch","err","message","taskid","ms","Promise","resolve","setTimeout","get","String","objVal","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from '@material-ui/core/Button';\nimport axios from \"axios\";\n//import Paper from '@material-ui/core/Paper';\n\nexport default function ManualOrder() {\n\n //const [DeliveryVisibility, setDeliveryVisibility] = useState(\"inline\");\n //const [LoopVisibility, setLoopVisibility] = useState(\"none\");\n\n\n    /*{\"task_type\": \"Delivery\", \"start_time\": 0, \"priority\": 0, \n    \"description\": { \"dropoff_ingestor\": \"coke_ingestor\", \"dropoff_place_name\": \"hardware_2\",\"pickup_dispenser\": \n    \"coke_dispenser\", \"pickup_place_name\": \"pantry\" } }) */\n\n  const [orderId, setOrderId] = useState(\"\")\n  const [sessionId, setSessionId] = useState(\"\")\n\n  function getFormValues(){\n\n    //Delivery\n    var startzeit = document.getElementById('startzeit').value;\n    var prio = document.getElementById('prio').value;\n    var coordinatefrom = document.getElementById('coordinatefrom').value; \n    var coordinateto = document.getElementById('coordinateto').value; \n    var pickupdispenser = document.getElementById('pickupdispenser').value; \n    var dropoffingestor = document.getElementById('dropoffingestor').value; \n\n    //Loop\n    //var auftragstyp = document.getElementById('auftragstyp').value; \n    //var startLoc = document.getElementById('startLoc').value; //Loop\n    //var endLoc = document.getElementById('endLoc').value; //Loop\n    //var numberLoops = document.getElementById('numberLoops').value; //Loop\n\n\n\n    //Delivery-Order\n\n    if (startzeit === '' || prio === '' || coordinatefrom === '' || coordinateto === '' || pickupdispenser === ''|| dropoffingestor === '')\n        { return undefined; }\n\n    /*\n        var obj = {}\n    obj['task_type'] = \"Delivery\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio); \n    obj[\"description\"] = {\"dropoff_ingestor\": dropoffingestor, \"dropoff_place_name\": coordinateto, \"pickup_dispenser\": \n    pickupdispenser, \"pickup_place_name\": coordinatefrom }; */\n\n    var obj = {\"task_type\": \"Delivery\",\"start_time\": parseInt(startzeit), \"priority\": parseInt(prio),\n    \"description\": {\"dropoff_ingestor\": dropoffingestor, \"dropoff_place_name\": coordinateto,\n    \"pickup_dispenser\": pickupdispenser, \"pickup_place_name\": coordinatefrom }}\n\n\n\n    //Loop Order\n    /*if (auftragstyp === \"Loop\") {\n\n      if(startzeit === '' || prio === '' || numberLoops === '' || \n         numberLoops === 0 || startLoc === '' || endLoc === '')  { return undefined;} \n  \n      obj['task_type'] = \"Loop\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio);\n      obj['description'] = {\"num_loops\": parseInt(numberLoops) , \"start_name\": startLoc, \"finish_name\": endLoc};\n   \n    } */\n    return obj;\n\n  } \n\n  function sendToAgv(){\n    \n    var obj = getFormValues();\n    if(obj === undefined || obj.length === 0) {alert(\"Bitte richtige Daten eingeben.\"); return;} \n    console.log(\"Auftrag:\", obj)\n\n   \n    //axios.post('http://0.0.0.0:8080/submit_task',{\"task_type\":\"Loop\", \"start_time\":0, \"description\": {\"start_name\": \"coe\", \"finish_name\": \"pantry\", \"num_loops\":1}})\n    //axios.post('http://0.0.0.0:8080/submit_task',{\"task_type\": \"Delivery\", \"start_time\": 0, \"priority\": 0, \"description\": { \"dropoff_ingestor\": \"coke_ingestor\", \"dropoff_place_name\": \"hardware_2\",\"pickup_dispenser\": \"coke_dispenser\", \"pickup_place_name\": \"pantry\" } })\n\n   axios.post('http://0.0.0.0:8080/submit_task', obj)\n    .then(res => {\n      if(res.data === undefined || res.data.length === 0)  return;\n    console.log(\"Returned Task ID:\", res.data['task_id']);\n\n    var taskId = res.data['task_id']\n\n    //Put orders to DB\n    PutOrderToDb(obj);  \n\n    getOrderId();\n\n    getSessionId();\n\n    sleep(1000).then(() => {\n    \n    console.log(\"TaskId:\", taskId, \"OrderId\", orderId, \"SessionId:\", sessionId)\n    \n    insertMapping(taskId);\n    \n    //ASK_ID in MYSQL ORDER.OrderMappingRMF\n\n\n\n    });\n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        alert(\"Fehler beim Auftrag übermitteln.\");  \n  \n    }) \n\n    return;\n  }\n\n  function insertMapping(taskid) {\n\n    obj = { \"M_SESSIONID\": sessionId, \"OM_DELIVERYID\": taskid, \"OM_O_ID\": orderId, \"OM_OT_ID\":  2};\n\n    axios.post('http://0.0.0.0:8080/insertMapping', obj)\n    .then(res => {\n\n    console.log(\"Done\");\n    alert(\"Erfolgreich übermittelt.\"); \n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        alert(\"Fehler.\");  \n  \n    }) \n\n  }\n\n\n  function sleep(ms){\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  function getSessionId(){\n\n    axios.get('http://0.0.0.0:8080/getSessionId')\n    .then(res => {\n    console.log(\"SessionId:\", res[\"data\"]);\n    setSessionId(String(res[\"data\"]))\n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        alert(\"Fehler bei der SessionId.\");  \n  \n    }) \n\n  }\n\n  function getOrderId(){\n\n    axios.get('http://0.0.0.0:8080/getOrderId?ordertype=2')\n    .then(res => {\n    console.log(\"Orderid:\", res[\"data\"]);\n    setOrderId(String(res[\"data\"]))\n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        alert(\"Fehler bei der OrderId.\");  \n  \n    }) \n\n  }\n\n  function PutOrderToDb(objVal){\n\n    axios.post('http://0.0.0.0:8080/postOrderManual', objVal)\n    .then(res => {\n    console.log(\"DB RESPONSE:\", res);\n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        alert(\"Fehler.\");  \n  \n    }) \n\nreturn;\n  }\n \n  //Visibility of input fields for specific order typ\n  /*function dropDownChange(newValue){\n\n    if(newValue === undefined || newValue === null) return;\n\n    //Loop\n    if (newValue === \"Loop\") {\n      setDeliveryVisibility(\"none\");\n      setLoopVisibility(\"inline\");\n    }\n    \n    //Delivery\n    if (newValue === \"Delivery\") {\n      setDeliveryVisibility(\"inline\");\n      setLoopVisibility(\"none\");\n    }\n  } */\n\n  return (\n    <div align=\"left\" justify=\"left\" alignItems=\"left\">\n <p>Manueller Fahrauftrag</p>\n <table > \n      {/*<tr>\n        <td colspan=\"1\" >\n        <select name=\"auftragstyp\"  id=\"auftragstyp\" onChange={e => dropDownChange(e.target.value)}>\n            <option  value=\"Delivery\"> Delivery</option>\n            <option  value=\"Loop\" >Loop</option>\n\n          </select>\n          \n          </td> \n      </tr>*/}\n\n      <tr >\n        <td colspan=\"1\"> <input value=\"0\" type=\"number\" id=\"startzeit\" /> Startzeit (Minuten von jetztab)</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input value=\"0\" type=\"number\" id=\"prio\" /> Priorität </td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input  value=\"pantry\"  type=\"text\" id=\"coordinatefrom\" /> Koordinate von</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input value=\"hardware_2\" type=\"text\" id=\"coordinateto\" /> Koordinate zu</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input value=\"coke_dispenser\" type=\"text\" id=\"pickupdispenser\" /> Abholpunkt</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input value=\"coke_ingestor\" type=\"text\" id=\"dropoffingestor\" /> Abwurfpunkt</td>\n      </tr>\n      {/*\n      <tr id = \"Loop\" >\n        <td colspan=\"1\" style={{display: LoopVisibility}}> <input type=\"text\" id=\"startLoc\" /> Start-Location</td>\n      </tr>\n      <tr id = \"Loop\" >\n        <td colspan=\"1\" style={{display: LoopVisibility}}> <input type=\"text\" id=\"endLoc\" /> End-Location</td>\n      </tr>\n      <tr id = \"Loop\" >\n        <td colspan=\"1\" style={{display: LoopVisibility}}> <input type=\"number\" id=\"numberLoops\" />Nummer an Loops</td>\n      </tr> */}\n      <tr >\n        <br></br>\n      <Button \n    //variant=\"contained\" \n    style={{backgroundColor: \"gray\"}}\n    onClick={sendToAgv} \n    title=\"Mit Klick auf diesen Button werden manuelle Fahraufträge weitergegeben.\" >\n    Absenden\n  </Button>\n      </tr>\n  </table>\n    </div>\n    \n  );\n}"]},"metadata":{},"sourceType":"module"}