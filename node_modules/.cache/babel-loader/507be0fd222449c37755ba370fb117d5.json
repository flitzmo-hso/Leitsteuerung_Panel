{"ast":null,"code":"var _jsxFileName = \"/home/flitzmofinal/GitHub/Leitsteuerung_Panel/src/components/Orders/ManualOrder.js\";\nimport React\n/*, { useState }*/\nfrom \"react\";\nimport Button from '@material-ui/core/Button';\nimport axios from \"axios\";\nimport { Paper } from '@material-ui/core'; //import Paper from '@material-ui/core/Paper';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ManualOrder() {\n  //const [DeliveryVisibility, setDeliveryVisibility] = useState(\"inline\");\n  //const [LoopVisibility, setLoopVisibility] = useState(\"none\");\n\n  /*{\"task_type\": \"Delivery\", \"start_time\": 0, \"priority\": 0, \n  \"description\": { \"dropoff_ingestor\": \"coke_ingestor\", \"dropoff_place_name\": \"hardware_2\",\"pickup_dispenser\": \n  \"coke_dispenser\", \"pickup_place_name\": \"pantry\" } }) */\n  function getFormValues() {\n    //Delivery\n    var startzeit = document.getElementById('startzeit').value;\n    var prio = document.getElementById('prio').value;\n    var coordinatefrom = document.getElementById('coordinatefrom').value;\n    var coordinateto = document.getElementById('coordinateto').value;\n    var pickupdispenser = document.getElementById('pickupdispenser').value;\n    var dropoffingestor = document.getElementById('dropoffingestor').value; //Loop\n    //var auftragstyp = document.getElementById('auftragstyp').value; \n    //var startLoc = document.getElementById('startLoc').value; //Loop\n    //var endLoc = document.getElementById('endLoc').value; //Loop\n    //var numberLoops = document.getElementById('numberLoops').value; //Loop\n    //Delivery-Order\n\n    if (startzeit === '' || prio === '' || coordinatefrom === '' || coordinateto === '' || pickupdispenser === '' || dropoffingestor === '') {\n      return undefined;\n    }\n    /*\n        var obj = {}\n    obj['task_type'] = \"Delivery\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio); \n    obj[\"description\"] = {\"dropoff_ingestor\": dropoffingestor, \"dropoff_place_name\": coordinateto, \"pickup_dispenser\": \n    pickupdispenser, \"pickup_place_name\": coordinatefrom }; */\n\n\n    var obj = {\n      \"task_type\": \"Delivery\",\n      \"start_time\": parseInt(startzeit),\n      \"priority\": parseInt(prio),\n      \"description\": {\n        \"dropoff_ingestor\": dropoffingestor,\n        \"dropoff_place_name\": coordinateto,\n        \"pickup_dispenser\": pickupdispenser,\n        \"pickup_place_name\": coordinatefrom\n      }\n    }; //Loop Order\n\n    /*if (auftragstyp === \"Loop\") {\n       if(startzeit === '' || prio === '' || numberLoops === '' || \n         numberLoops === 0 || startLoc === '' || endLoc === '')  { return undefined;} \n         obj['task_type'] = \"Loop\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio);\n      obj['description'] = {\"num_loops\": parseInt(numberLoops) , \"start_name\": startLoc, \"finish_name\": endLoc};\n        } */\n\n    return obj;\n  } //Sleep for asynchronous calls\n\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  } //Success and error messages\n\n\n  function cssMessage(message, color) {\n    //Set\n    document.getElementsByClassName(\"footer\")[0].style.textAlign = \"center\";\n    document.getElementsByClassName(\"footer\")[0].innerHTML = message;\n    document.getElementsByClassName(\"footer\")[0].style.backgroundColor = color; //Reset\n\n    sleep(4000).then(() => {\n      document.getElementsByClassName(\"footer\")[0].style.textAlign = \"right\";\n      document.getElementsByClassName(\"footer\")[0].innerHTML = \"Powered by ©Flitzmo\";\n      document.getElementsByClassName(\"footer\")[0].style.backgroundColor = \"#004466\";\n    });\n  }\n\n  function sendToAgv() {\n    var obj = getFormValues();\n\n    if (obj === undefined || obj.length === 0) {\n      alert(\"Bitte richtige Daten eingeben.\");\n      return;\n    }\n\n    console.log(\"Auftrag:\", obj);\n    axios.post('http://0.0.0.0:8080/submit_task', obj).then(res => {\n      if (res.data === undefined || res.data.length === 0) return;\n      console.log(\"Returned Task ID:\", res.data['task_id']);\n      var taskId = res.data['task_id']; //Put orders to DB\n\n      PutOrderToDb(obj, taskId);\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      cssMessage(\"Fehler beim Übermitteln.\", \"#9c2c2c\");\n    });\n    return;\n  }\n\n  function insertMapping(taskid, orderId, sessionId) {\n    console.log(\"TaskId:\", taskid, \"OrderId\", orderId, \"SessionId:\", sessionId);\n    var obj = {\n      \"OM_SESSIONID\": parseInt(sessionId),\n      \"OM_DELIVERYID\": taskid,\n      \"OM_O_ID\": parseInt(orderId),\n      \"OM_OT_ID\": 2\n    };\n    axios.post('http://0.0.0.0:8080/insertMapping', obj).then(res => {\n      cssMessage(\"Erfolgreich übermittelt.\", \"#4dff88\");\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      cssMessage(\"Fehler beim Übermitteln.\", \"#9c2c2c\");\n    });\n  }\n\n  function PutOrderToDb(objVal, taskId) {\n    axios.post('http://0.0.0.0:8080/postOrderManual', objVal).then(res => {\n      console.log(\"DB RESPONSE:\", res.data[0]);\n      insertMapping(taskId, res.data[0][1], res.data[0][2]);\n    }).catch(err => {\n      console.log(err.message); //Error-Handling\n\n      cssMessage(\"Fehler beim Übermitteln.\", \"#9c2c2c\");\n    });\n    return;\n  } //Visibility of input fields for specific order typ\n\n  /*function dropDownChange(newValue){\n     if(newValue === undefined || newValue === null) return;\n     //Loop\n    if (newValue === \"Loop\") {\n      setDeliveryVisibility(\"none\");\n      setLoopVisibility(\"inline\");\n    }\n    \n    //Delivery\n    if (newValue === \"Delivery\") {\n      setDeliveryVisibility(\"inline\");\n      setLoopVisibility(\"none\");\n    }\n  } */\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    align: \"left\",\n    justify: \"left\",\n    alignItems: \"left\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      style: {\n        padding: \"20px\",\n        width: \"500px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"#e68a00\",\n          fontSize: \"20px\",\n          fontWeight: \"bold\"\n        },\n        children: \"Manueller Fahrauftrag\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 2\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colspan: \"1\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n              defaultValue: \"0\",\n              type: \"number\",\n              id: \"startzeit\",\n              style: {\n                height: \"30px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 26\n            }, this), \" Startzeit (Minuten ab jetzt)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colspan: \"1\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n              defaultValue: \"0\",\n              type: \"number\",\n              id: \"prio\",\n              style: {\n                height: \"30px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 26\n            }, this), \" Priorit\\xE4t \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colspan: \"1\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n              defaultValue: \"pantry\",\n              type: \"text\",\n              id: \"coordinatefrom\",\n              style: {\n                height: \"30px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 26\n            }, this), \" von Koordinate\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colspan: \"1\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n              defaultValue: \"hardware_2\",\n              type: \"text\",\n              id: \"coordinateto\",\n              style: {\n                height: \"30px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 26\n            }, this), \" nach Koordinate\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colspan: \"1\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n              defaultValue: \"coke_dispenser\",\n              type: \"text\",\n              id: \"pickupdispenser\",\n              style: {\n                height: \"30px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 26\n            }, this), \" Abholpunkt\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colspan: \"1\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n              defaultValue: \"coke_ingestor\",\n              type: \"text\",\n              id: \"dropoffingestor\",\n              style: {\n                height: \"30px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 26\n            }, this), \" Abladepunkt\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Button //variant=\"contained\" \n          , {\n            style: {\n              backgroundColor: \"#e68a00\",\n              color: \"white\"\n            },\n            onClick: sendToAgv,\n            title: \"Mit Klick auf diesen Button werden manuelle Fahrauftr\\xE4ge weitergegeben.\",\n            children: \"Absenden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 2\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n}\n_c = ManualOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManualOrder\");","map":{"version":3,"sources":["/home/flitzmofinal/GitHub/Leitsteuerung_Panel/src/components/Orders/ManualOrder.js"],"names":["React","Button","axios","Paper","ManualOrder","getFormValues","startzeit","document","getElementById","value","prio","coordinatefrom","coordinateto","pickupdispenser","dropoffingestor","undefined","obj","parseInt","sleep","ms","Promise","resolve","setTimeout","cssMessage","message","color","getElementsByClassName","style","textAlign","innerHTML","backgroundColor","then","sendToAgv","length","alert","console","log","post","res","data","taskId","PutOrderToDb","catch","err","insertMapping","taskid","orderId","sessionId","objVal","padding","width","fontSize","fontWeight","height"],"mappings":";AAAA,OAAOA;AAAM;AAAb,KAAqC,OAArC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,mBAAtB,C,CACA;;;AAEA,eAAe,SAASC,WAAT,GAAuB;AAErC;AACA;;AAGG;AACJ;AACA;AAEE,WAASC,aAAT,GAAwB;AAEtB;AACA,QAAIC,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArD;AACA,QAAIC,IAAI,GAAGH,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,KAA3C;AACA,QAAIE,cAAc,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA/D;AACA,QAAIG,YAAY,GAAGL,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAA3D;AACA,QAAII,eAAe,GAAGN,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CC,KAAjE;AACA,QAAIK,eAAe,GAAGP,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CC,KAAjE,CARsB,CAUtB;AACA;AACA;AACA;AACA;AAIA;;AAEA,QAAIH,SAAS,KAAK,EAAd,IAAoBI,IAAI,KAAK,EAA7B,IAAmCC,cAAc,KAAK,EAAtD,IAA4DC,YAAY,KAAK,EAA7E,IAAmFC,eAAe,KAAK,EAAvG,IAA4GC,eAAe,KAAK,EAApI,EACI;AAAE,aAAOC,SAAP;AAAmB;AAEzB;AACJ;AACA;AACA;AACA;;;AAEI,QAAIC,GAAG,GAAG;AAAC,mBAAa,UAAd;AAAyB,oBAAcC,QAAQ,CAACX,SAAD,CAA/C;AAA4D,kBAAYW,QAAQ,CAACP,IAAD,CAAhF;AACV,qBAAe;AAAC,4BAAoBI,eAArB;AAAsC,8BAAsBF,YAA5D;AACf,4BAAoBC,eADL;AACsB,6BAAqBF;AAD3C;AADL,KAAV,CA7BsB,CAmCtB;;AACA;AACJ;AACA;AACA;AACA;AACA;;AAKI,WAAOK,GAAP;AAED,GA1DmC,CA4DpC;;;AACF,WAASE,KAAT,CAAeC,EAAf,EAAmB;AACjB,WAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAjC,CAAP;AACD,GA/DqC,CAkEpC;;;AACF,WAASI,UAAT,CAAoBC,OAApB,EAA6BC,KAA7B,EACA;AAAE;AACAlB,IAAAA,QAAQ,CAACmB,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CC,KAA7C,CAAmDC,SAAnD,GAA+D,QAA/D;AACArB,IAAAA,QAAQ,CAACmB,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CG,SAA7C,GAAyDL,OAAzD;AACAjB,IAAAA,QAAQ,CAACmB,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CC,KAA7C,CAAmDG,eAAnD,GAAqEL,KAArE,CAHF,CAKE;;AACAP,IAAAA,KAAK,CAAC,IAAD,CAAL,CAAYa,IAAZ,CAAiB,MAAM;AACvBxB,MAAAA,QAAQ,CAACmB,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CC,KAA7C,CAAmDC,SAAnD,GAA+D,OAA/D;AACArB,MAAAA,QAAQ,CAACmB,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CG,SAA7C,GAAyD,qBAAzD;AACAtB,MAAAA,QAAQ,CAACmB,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CC,KAA7C,CAAmDG,eAAnD,GAAqE,SAArE;AACC,KAJD;AAKD;;AAEC,WAASE,SAAT,GAAoB;AAElB,QAAIhB,GAAG,GAAGX,aAAa,EAAvB;;AACA,QAAGW,GAAG,KAAKD,SAAR,IAAqBC,GAAG,CAACiB,MAAJ,KAAe,CAAvC,EAA0C;AAACC,MAAAA,KAAK,CAAC,gCAAD,CAAL;AAAyC;AAAQ;;AAC5FC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBpB,GAAxB;AAGDd,IAAAA,KAAK,CAACmC,IAAN,CAAW,iCAAX,EAA8CrB,GAA9C,EACEe,IADF,CACOO,GAAG,IAAI;AACX,UAAGA,GAAG,CAACC,IAAJ,KAAaxB,SAAb,IAA0BuB,GAAG,CAACC,IAAJ,CAASN,MAAT,KAAoB,CAAjD,EAAqD;AACvDE,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCE,GAAG,CAACC,IAAJ,CAAS,SAAT,CAAjC;AAEA,UAAIC,MAAM,GAAGF,GAAG,CAACC,IAAJ,CAAS,SAAT,CAAb,CAJa,CAMb;;AACAE,MAAAA,YAAY,CAACzB,GAAD,EAAMwB,MAAN,CAAZ;AAEC,KAVF,EAWEE,KAXF,CAWQC,GAAG,IAAI;AACVR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACnB,OAAhB,EADU,CACgB;;AAC1BD,MAAAA,UAAU,CAAC,0BAAD,EAA6B,SAA7B,CAAV;AAEH,KAfF;AAiBC;AACD;;AAED,WAASqB,aAAT,CAAuBC,MAAvB,EAA+BC,OAA/B,EAAwCC,SAAxC,EAAmD;AAEjDZ,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBS,MAAvB,EAA+B,SAA/B,EAA0CC,OAA1C,EAAmD,YAAnD,EAAiEC,SAAjE;AAEA,QAAI/B,GAAG,GAAG;AAAE,sBAAgBC,QAAQ,CAAC8B,SAAD,CAA1B;AAAuC,uBAAiBF,MAAxD;AAAgE,iBAAW5B,QAAQ,CAAC6B,OAAD,CAAnF;AAA8F,kBAAa;AAA3G,KAAV;AAEA5C,IAAAA,KAAK,CAACmC,IAAN,CAAW,mCAAX,EAAgDrB,GAAhD,EACCe,IADD,CACMO,GAAG,IAAI;AAEXf,MAAAA,UAAU,CAAC,0BAAD,EAA6B,SAA7B,CAAV;AAED,KALD,EAMCmB,KAND,CAMOC,GAAG,IAAI;AACVR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACnB,OAAhB,EADU,CACgB;;AAC1BD,MAAAA,UAAU,CAAC,0BAAD,EAA6B,SAA7B,CAAV;AAEH,KAVD;AAYD;;AAGD,WAASkB,YAAT,CAAsBO,MAAtB,EAA8BR,MAA9B,EAAqC;AAEnCtC,IAAAA,KAAK,CAACmC,IAAN,CAAW,qCAAX,EAAkDW,MAAlD,EACCjB,IADD,CACMO,GAAG,IAAI;AACbH,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BE,GAAG,CAACC,IAAJ,CAAS,CAAT,CAA5B;AAEEK,MAAAA,aAAa,CAACJ,MAAD,EAASF,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAT,EAAyBD,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAzB,CAAb;AAGD,KAPD,EAQCG,KARD,CAQOC,GAAG,IAAI;AACVR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACnB,OAAhB,EADU,CACgB;;AAC1BD,MAAAA,UAAU,CAAC,0BAAD,EAA6B,SAA7B,CAAV;AAEH,KAZD;AAcJ;AACG,GAlJmC,CAoJpC;;AACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAIE,sBACE;AAAK,IAAA,KAAK,EAAC,MAAX;AAAkB,IAAA,OAAO,EAAC,MAA1B;AAAiC,IAAA,UAAU,EAAC,MAA5C;AAAA,2BACE,QAAC,KAAD;AAAO,MAAA,KAAK,EAAE;AAAC0B,QAAAA,OAAO,EAAC,MAAT;AAAiBC,QAAAA,KAAK,EAAC;AAAvB,OAAd;AAAA,8BACL;AAAG,QAAA,KAAK,EAAE;AAACzB,UAAAA,KAAK,EAAE,SAAR;AAAmB0B,UAAAA,QAAQ,EAAC,MAA5B;AAAoCC,UAAAA,UAAU,EAAC;AAA/C,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADK,eAEL;AAAA,gCAYK;AAAA,iCACE;AAAI,YAAA,OAAO,EAAC,GAAZ;AAAA,yCAAiB;AAAO,cAAA,YAAY,EAAC,GAApB;AAAwB,cAAA,IAAI,EAAC,QAA7B;AAAsC,cAAA,EAAE,EAAC,WAAzC;AAAqD,cAAA,KAAK,EAAE;AAACC,gBAAAA,MAAM,EAAC;AAAR;AAA5D;AAAA;AAAA;AAAA;AAAA,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAZL,eAeK;AAAA,iCACE;AAAI,YAAA,OAAO,EAAC,GAAZ;AAAA,yCAAiB;AAAO,cAAA,YAAY,EAAC,GAApB;AAAwB,cAAA,IAAI,EAAC,QAA7B;AAAsC,cAAA,EAAE,EAAC,MAAzC;AAAgD,cAAA,KAAK,EAAE;AAACA,gBAAAA,MAAM,EAAC;AAAR;AAAvD;AAAA;AAAA;AAAA;AAAA,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAfL,eAkBK;AAAA,iCACE;AAAI,YAAA,OAAO,EAAC,GAAZ;AAAA,yCAAiB;AAAQ,cAAA,YAAY,EAAC,QAArB;AAA+B,cAAA,IAAI,EAAC,MAApC;AAA2C,cAAA,EAAE,EAAC,gBAA9C;AAA+D,cAAA,KAAK,EAAE;AAACA,gBAAAA,MAAM,EAAC;AAAR;AAAtE;AAAA;AAAA;AAAA;AAAA,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAlBL,eAqBK;AAAA,iCACE;AAAI,YAAA,OAAO,EAAC,GAAZ;AAAA,yCAAiB;AAAO,cAAA,YAAY,EAAC,YAApB;AAAiC,cAAA,IAAI,EAAC,MAAtC;AAA6C,cAAA,EAAE,EAAC,cAAhD;AAA+D,cAAA,KAAK,EAAE;AAACA,gBAAAA,MAAM,EAAC;AAAR;AAAtE;AAAA;AAAA;AAAA;AAAA,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBArBL,eAwBK;AAAA,iCACE;AAAI,YAAA,OAAO,EAAC,GAAZ;AAAA,yCAAiB;AAAO,cAAA,YAAY,EAAC,gBAApB;AAAqC,cAAA,IAAI,EAAC,MAA1C;AAAiD,cAAA,EAAE,EAAC,iBAApD;AAAsE,cAAA,KAAK,EAAE;AAACA,gBAAAA,MAAM,EAAC;AAAR;AAA7E;AAAA;AAAA;AAAA;AAAA,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAxBL,eA2BK;AAAA,iCACE;AAAI,YAAA,OAAO,EAAC,GAAZ;AAAA,yCAAiB;AAAO,cAAA,YAAY,EAAC,eAApB;AAAoC,cAAA,IAAI,EAAC,MAAzC;AAAgD,cAAA,EAAE,EAAC,iBAAnD;AAAqE,cAAA,KAAK,EAAE;AAACA,gBAAAA,MAAM,EAAC;AAAR;AAA5E;AAAA;AAAA;AAAA;AAAA,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA3BL,eAwCK;AAAI,UAAA,UAAU,EAAC,QAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA,kBADF,eAEA,QAAC,MAAD,CAEF;AAFE;AAGF,YAAA,KAAK,EAAE;AAACvB,cAAAA,eAAe,EAAE,SAAlB;AAA6BL,cAAAA,KAAK,EAAC;AAAnC,aAHL;AAIF,YAAA,OAAO,EAAEO,SAJP;AAKF,YAAA,KAAK,EAAC,4EALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxCL;AAAA;AAAA;AAAA;AAAA;AAAA,cAFK;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA4DD;KAlOuB5B,W","sourcesContent":["import React /*, { useState }*/ from \"react\";\nimport Button from '@material-ui/core/Button';\nimport axios from \"axios\";\nimport { Paper } from '@material-ui/core';\n//import Paper from '@material-ui/core/Paper';\n\nexport default function ManualOrder() {\n\n //const [DeliveryVisibility, setDeliveryVisibility] = useState(\"inline\");\n //const [LoopVisibility, setLoopVisibility] = useState(\"none\");\n\n\n    /*{\"task_type\": \"Delivery\", \"start_time\": 0, \"priority\": 0, \n    \"description\": { \"dropoff_ingestor\": \"coke_ingestor\", \"dropoff_place_name\": \"hardware_2\",\"pickup_dispenser\": \n    \"coke_dispenser\", \"pickup_place_name\": \"pantry\" } }) */\n\n  function getFormValues(){\n\n    //Delivery\n    var startzeit = document.getElementById('startzeit').value;\n    var prio = document.getElementById('prio').value;\n    var coordinatefrom = document.getElementById('coordinatefrom').value; \n    var coordinateto = document.getElementById('coordinateto').value; \n    var pickupdispenser = document.getElementById('pickupdispenser').value; \n    var dropoffingestor = document.getElementById('dropoffingestor').value; \n\n    //Loop\n    //var auftragstyp = document.getElementById('auftragstyp').value; \n    //var startLoc = document.getElementById('startLoc').value; //Loop\n    //var endLoc = document.getElementById('endLoc').value; //Loop\n    //var numberLoops = document.getElementById('numberLoops').value; //Loop\n\n\n\n    //Delivery-Order\n\n    if (startzeit === '' || prio === '' || coordinatefrom === '' || coordinateto === '' || pickupdispenser === ''|| dropoffingestor === '')\n        { return undefined; }\n\n    /*\n        var obj = {}\n    obj['task_type'] = \"Delivery\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio); \n    obj[\"description\"] = {\"dropoff_ingestor\": dropoffingestor, \"dropoff_place_name\": coordinateto, \"pickup_dispenser\": \n    pickupdispenser, \"pickup_place_name\": coordinatefrom }; */\n\n    var obj = {\"task_type\": \"Delivery\",\"start_time\": parseInt(startzeit), \"priority\": parseInt(prio),\n    \"description\": {\"dropoff_ingestor\": dropoffingestor, \"dropoff_place_name\": coordinateto,\n    \"pickup_dispenser\": pickupdispenser, \"pickup_place_name\": coordinatefrom }}\n\n\n\n    //Loop Order\n    /*if (auftragstyp === \"Loop\") {\n\n      if(startzeit === '' || prio === '' || numberLoops === '' || \n         numberLoops === 0 || startLoc === '' || endLoc === '')  { return undefined;} \n  \n      obj['task_type'] = \"Loop\"; obj['start_time'] = parseInt(startzeit); obj['priority'] = parseInt(prio);\n      obj['description'] = {\"num_loops\": parseInt(numberLoops) , \"start_name\": startLoc, \"finish_name\": endLoc};\n   \n    } */\n    \n    return obj;\n\n  } \n\n  //Sleep for asynchronous calls\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\n  //Success and error messages\nfunction cssMessage(message, color)\n{ //Set\n  document.getElementsByClassName(\"footer\")[0].style.textAlign = \"center\";\n  document.getElementsByClassName(\"footer\")[0].innerHTML = message;\n  document.getElementsByClassName(\"footer\")[0].style.backgroundColor = color;\n\n  //Reset\n  sleep(4000).then(() => { \n  document.getElementsByClassName(\"footer\")[0].style.textAlign = \"right\";\n  document.getElementsByClassName(\"footer\")[0].innerHTML = \"Powered by ©Flitzmo\";\n  document.getElementsByClassName(\"footer\")[0].style.backgroundColor = \"#004466\";\n  });\n}\n\n  function sendToAgv(){\n    \n    var obj = getFormValues();\n    if(obj === undefined || obj.length === 0) {alert(\"Bitte richtige Daten eingeben.\"); return;} \n    console.log(\"Auftrag:\", obj)\n\n\n   axios.post('http://0.0.0.0:8080/submit_task', obj)\n    .then(res => {\n      if(res.data === undefined || res.data.length === 0)  return;\n    console.log(\"Returned Task ID:\", res.data['task_id']);\n\n    var taskId = res.data['task_id']\n\n    //Put orders to DB\n    PutOrderToDb(obj, taskId);  \n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        cssMessage(\"Fehler beim Übermitteln.\", \"#9c2c2c\"); \n  \n    }) \n\n    return;\n  }\n\n  function insertMapping(taskid, orderId, sessionId) {\n\n    console.log(\"TaskId:\", taskid, \"OrderId\", orderId, \"SessionId:\", sessionId)\n    \n    var obj = { \"OM_SESSIONID\": parseInt(sessionId), \"OM_DELIVERYID\": taskid, \"OM_O_ID\": parseInt(orderId), \"OM_OT_ID\":  2};\n\n    axios.post('http://0.0.0.0:8080/insertMapping', obj)\n    .then(res => {\n\n      cssMessage(\"Erfolgreich übermittelt.\", \"#4dff88\");\n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        cssMessage(\"Fehler beim Übermitteln.\", \"#9c2c2c\"); \n  \n    }) \n\n  }\n\n\n  function PutOrderToDb(objVal, taskId){\n\n    axios.post('http://0.0.0.0:8080/postOrderManual', objVal)\n    .then(res => {\n    console.log(\"DB RESPONSE:\", res.data[0]);\n\n      insertMapping(taskId, res.data[0][1], res.data[0][2]);\n   \n  \n    })\n    .catch(err => {\n        console.log(err.message); //Error-Handling\n        cssMessage(\"Fehler beim Übermitteln.\", \"#9c2c2c\"); \n  \n    }) \n\nreturn;\n  }\n \n  //Visibility of input fields for specific order typ\n  /*function dropDownChange(newValue){\n\n    if(newValue === undefined || newValue === null) return;\n\n    //Loop\n    if (newValue === \"Loop\") {\n      setDeliveryVisibility(\"none\");\n      setLoopVisibility(\"inline\");\n    }\n    \n    //Delivery\n    if (newValue === \"Delivery\") {\n      setDeliveryVisibility(\"inline\");\n      setLoopVisibility(\"none\");\n    }\n  } */\n\n  return (\n    <div align=\"left\" justify=\"left\" alignItems=\"left\">\n      <Paper style={{padding:\"20px\", width:\"500px\"}}>\n <p style={{color: \"#e68a00\", fontSize:\"20px\", fontWeight:\"bold\"}}>Manueller Fahrauftrag</p>\n <table > \n      {/*<tr>\n        <td colspan=\"1\" >\n        <select name=\"auftragstyp\"  id=\"auftragstyp\" onChange={e => dropDownChange(e.target.value)}>\n            <option  value=\"Delivery\"> Delivery</option>\n            <option  value=\"Loop\" >Loop</option>\n\n          </select>\n          \n          </td> \n      </tr>*/}\n\n      <tr >\n        <td colspan=\"1\"> <input defaultValue=\"0\" type=\"number\" id=\"startzeit\" style={{height:\"30px\"}}/> Startzeit (Minuten ab jetzt)</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input defaultValue=\"0\" type=\"number\" id=\"prio\" style={{height:\"30px\"}}/> Priorität </td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input  defaultValue=\"pantry\"  type=\"text\" id=\"coordinatefrom\" style={{height:\"30px\"}}/> von Koordinate</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input defaultValue=\"hardware_2\" type=\"text\" id=\"coordinateto\" style={{height:\"30px\"}}/> nach Koordinate</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input defaultValue=\"coke_dispenser\" type=\"text\" id=\"pickupdispenser\" style={{height:\"30px\"}}/> Abholpunkt</td>\n      </tr>\n      <tr >\n        <td colspan=\"1\"> <input defaultValue=\"coke_ingestor\" type=\"text\" id=\"dropoffingestor\" style={{height:\"30px\"}}/> Abladepunkt</td>\n      </tr>\n      {/*\n      <tr id = \"Loop\" >\n        <td colspan=\"1\" style={{display: LoopVisibility}}> <input type=\"text\" id=\"startLoc\" /> Start-Location</td>\n      </tr>\n      <tr id = \"Loop\" >\n        <td colspan=\"1\" style={{display: LoopVisibility}}> <input type=\"text\" id=\"endLoc\" /> End-Location</td>\n      </tr>\n      <tr id = \"Loop\" >\n        <td colspan=\"1\" style={{display: LoopVisibility}}> <input type=\"number\" id=\"numberLoops\" />Nummer an Loops</td>\n      </tr> */}\n      <tr alignItems=\"center\">\n        <br></br>\n      <Button \n      \n    //variant=\"contained\" \n    style={{backgroundColor: \"#e68a00\", color:\"white\"}}\n    onClick={sendToAgv} \n    title=\"Mit Klick auf diesen Button werden manuelle Fahraufträge weitergegeben.\" >\n    Absenden\n  </Button>\n      </tr>\n  </table>\n  </Paper>\n    </div>\n    \n  );\n}"]},"metadata":{},"sourceType":"module"}